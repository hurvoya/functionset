import matplotlib.pyplot as plt
import seaborn as sns

def plot_stats(df_stats, threshold):
    variables = df_stats['variable'].unique()
    for var in variables:
        for stat in ['nb_de_RAV', 'success_rate']:
            plt.figure(figsize=(12, 6))
            data = df_stats[(df_stats['variable'] == var) & (df_stats['Stats'] == stat) & (df_stats['below_threshold'] == 0)]
            sns.lineplot(data=data, x='annee_mois', y='valeur', hue='valeur_variable')
            plt.title(f'{stat} over time for variable {var}')
            plt.xticks(rotation=45)
            plt.tight_layout()
            plt.show()

plot_stats(df_stats, threshold)
